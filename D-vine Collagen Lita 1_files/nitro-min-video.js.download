if(typeof fcaPcPost==="object"&&fcaPcPost.video_enabled==="1"){class EventEmitter{constructor(){this.events={}}on(e,t){if(typeof this.events[e]!=="object"){this.events[e]=[]}this.events[e].push(t);return()=>this.removeListener(e,t)}removeListener(e,t){if(typeof this.events[e]==="object"){const i=this.events[e].indexOf(t);if(i>-1){this.events[e].splice(i,1)}}}emit(e,...t){if(typeof this.events[e]==="object"){this.events[e].forEach(e=>e.apply(this,t))}}once(e,t){const i=this.on(e,(...e)=>{i();t.apply(this,e)})}}class FCA_PC_Video extends EventEmitter{constructor(e){super();this.video_ready=false;if(typeof e===undefined){return}this.element=e;this.init()}init(){this.setup_events();this.type=this.video_type();this.load_api()}load_api(){switch(this.type){case"YOUTUBE":this.api_youtube_load();break;case"WISTIA":this.api_wistia_load();break;case"VIMEO":this.api_vimeo_load();break}}setup_events(){this.on("api_youtube_loaded",this.api_youtube_setup);this.on("api_vimeo_loaded",this.api_vimeo_setup);this.on("api_wistia_loaded",this.api_wistia_setup)}video_type(){let e=this.element.attr("src");if(e===""){this.revoke("pixel cat video: video link not found.");return false}if(e.indexOf("youtube.com")>-1)return"YOUTUBE";if(e.indexOf("vimeo.com")>-1)return"VIMEO";if(e.indexOf("fast.wistia.com")>-1)return"WISTIA"}revoke(e){if(fcaPcCAPI.debug){console.log(e);console.log("pixel cat video: revoked ")}}api_vimeo_load(){jQuery.getScript("https://player.vimeo.com/api/player.js",()=>{this.emit("api_vimeo_loaded")})}api_vimeo_setup(){let e=this.element[0];try{this.api=new Vimeo.Player(e);this.api.ready().then(()=>{this.api_vimeo_ready()})}catch(e){if(fcaPcCAPI.debug)console.log(e.message);return}}api_vimeo_ready(){if(fcaPcCAPI.debug){console.log("Pixel Cat video: Vimeo video ready")}this.video_ready=true;this.api.getVideoId().then(e=>{this.video_id=e});this.api.getVideoTitle().then(e=>{this.title=e});this.api.getVideoUrl().then(e=>{this.url=e});this.api.getDuration().then(e=>{this.duration=e});this.events_triggered={};this.api_vimeo_state_change()}api_vimeo_state_change(){this.api.on("play",e=>{this.trigger_event("VideoPlay");this.timer=setInterval(this.track_progress.bind(this),1e3)});this.api.on("pause",e=>{this.trigger_event("VideoPause",{percentage_watched:this.percentage_watched()+"%"});clearInterval(this.timer)});this.api.on("ended",e=>{this.trigger_event("VideoWatchToEnd");clearInterval(this.timer)})}api_wistia_load(){jQuery.getScript("//fast.wistia.net/assets/external/E-v1.js",()=>{this.emit("api_wistia_loaded")})}api_wistia_setup(){let e=this.element;let t=e.attr("src");if(typeof t==="undefined"){return}const i=/(https:\/\/fast\.wistia\.com\/embed\/medias)\/(.*)\.jsonp/;let s=t.match(i);console.log(s);if(s===null){if(fcaPcCAPI){console.log("no video id match")}return}this.url=s[1];let a=s[2];if(typeof a==="undefined"){if(fcaPcCAPI.debug){console.log("pixel cat video: wistia video_id not found.")}return}window._wq=window._wq||[];this.api=window._wq;this.api.push({id:a,onReady:this.api_wistia_ready.bind(this)})}api_wistia_ready(e){if(fcaPcCAPI.debug){console.log("pixel cat video: wistia video ready.")}this.video_ready=true;this.api=e;this.video_id=e.data.media.hashedId;this.title=e.data.media.name!==undefined?e.data.media.name:"Untitled";this.url=this.url+"/"+this.video_id;this.events_triggered={};this.api_wistia_state_change.bind(this)()}api_wistia_state_change(){this.api.bind("play",e=>{this.trigger_event("VideoPlay")});this.api.bind("pause",e=>{this.trigger_event("VideoPause",{percentage_watched:this.percentage_watched()+"%"})});this.api.bind("percentwatchedchanged",(e,t)=>{this.track_progress()});this.api.bind("end",e=>{this.trigger_event("VideoWatchToEnd")})}api_youtube_load(){this.load_async_script("https://www.youtube.com/iframe_api")}api_youtube_setup(){let e=this.element[0];this.api=new YT.Player(e,{events:{onReady:this.api_youtube_ready.bind(this),onStateChange:this.api_youtube_state_change.bind(this)}})}api_youtube_ready(e){if(fcaPcCAPI.debug){console.log("pixel cat video: youtube video ready")}this.video_ready=true;this.data=this.api.getVideoData();this.video_id=this.data.video_id;this.title=this.data.title;this.url=this.api.getVideoUrl();this.events_triggered={}}api_youtube_state_change(e){if(fcaPcCAPI.debug){console.log(e)}switch(e.data){case 0:this.trigger_event("VideoWatchToEnd");clearInterval(this.timer);break;case 1:this.trigger_event("VideoPlay");this.timer=setInterval(this.track_progress.bind(this),1e3);break;case 2:this.trigger_event("VideoPause",{percentage_watched:this.percentage_watched()+"%"});clearInterval(this.timer);break}}video_youtube_end(){if(fcaPcCAPI){console.log("end")}}load_async_script(e){let t=document.createElement("script");let i=document.getElementsByTagName("script")[0];t.src=e;i.parentNode.insertBefore(t,i);if(fcaPcCAPI.debug){console.log("pixel cat video: "+e+" has been loaded.")}}track_progress(){switch(this.video_type()){case"YOUTUBE":case"VIMEO":case"WISTIA":this.video_track_progress();break}}video_track_progress(){let e=this.percentage_watched();if(fcaPcCAPI.debug){console.log(this.percentage_watched())}switch(true){case e>=10&&e<25:this.trigger_event("VideoWatch10Percent");break;case e>=25&&e<50:this.trigger_event("VideoWatch25Percent");break;case e>=50&&e<75:this.trigger_event("VideoWatch50Percent");break;case e>=75&&e<90:this.trigger_event("VideoWatch75Percent");break;case e>=90&&e<100:this.trigger_event("VideoWatch90Percent");break}}video_params(){return{video_title:this.title,video_url:this.url,video_id:this.video_id}}percentage_watched(){switch(this.type){case"YOUTUBE":return Math.round(this.api.getCurrentTime()/this.api.getDuration()*100);case"VIMEO":this.api.getCurrentTime().then(e=>{this.current_time=e});return Math.round(this.current_time/this.duration*100);case"WISTIA":return Math.round(this.api.time()/this.api.duration()*100);default:return false}}trigger_event(e,t={}){if(this.events_triggered[e]){return}let i=Object.assign({},this.video_params(),t);this.emit("pixel_event","trackCustom",e,i);if(e!=="VideoPause"){this.events_triggered[e]=true}}}FCA_PC_Video.prototype.__proto__=EventEmitter.prototype;function onYouTubeIframeAPIReady(){fcaPcVideos.forEach(e=>{if(e.type!=="YOUTUBE"){return}e.emit("api_youtube_loaded")})}window.fcaPcVideos=[];function detect_videos(){let t=[];jQuery("iframe").each(function(){var e=jQuery(this)[0].src.includes("?")?"&":"?";jQuery(this)[0].src=jQuery(this)[0].src+e+"enablejsapi=1";t.push(jQuery(this))});jQuery("script").each(function(){let e=jQuery(this).attr("src");if(typeof e==="undefined"){return}if(e.indexOf("https://fast.wistia.com/embed/medias/")===-1){return}t.push(jQuery(this))});if(t.length===0){if(fcaPcCAPI){console.log("No videos detected")}return}t.forEach(function(e){window.fcaPcVideos.push(new FCA_PC_Video(e))})}detect_videos()}